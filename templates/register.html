<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Register New Member</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; font-family: 'Segoe UI', sans-serif; }
        .navbar { background: #003087 !important; }
        .card { border-radius: 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.12); }
        .form-label { font-weight: bold; color: #003087; }
        .form-control, .form-select { height: 50px; border-radius: 12px; border: 2px solid #ddd; }
        .form-control:focus, .form-select:focus { border-color: #003087; box-shadow: 0 0 0 0.2rem rgba(0,48,135,.25); }

        /* SAVE BUTTON — STANDARD & PROFESSIONAL */
        .btn-save {
            background: #003087;
            color: white;
            padding: 14px 60px;
            font-size: 1.2rem;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,48,135,0.2);
            cursor: pointer;
        }
        .btn-save:hover {
            background: #00255e;
        }
        .btn-save:disabled {
            background: #999;
            cursor: not-allowed;
        }

        .photo-preview { width: 150px; height: 170px; border: 3px dashed #003087; border-radius: 10px; margin: 20px auto; display: flex; align-items: center; justify-content: center; background: #f0f8ff; }
        .photo-preview img { max-width: 100%; max-height: 100%; border-radius: 8px; }

        .form-header { text-align: center; margin-bottom: 30px; }
        .form-header img { height: 100px; margin-bottom: 15px; }
        .org-name { font-size: 2rem; font-weight: bold; color: #003087; }
        .org-address { color: #666; font-size: 1rem; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark">
    <div class="container-fluid">
        <a href="/" class="btn btn-outline-light btn-lg">Dashboard</a>
    </div>
</nav>

<div class="container py-5">
    <div class="card p-5">

        <!-- LOGO + HEADER -->
        <div class="form-header">
            <img src="/static/logo.png" alt="Logo" class="img-fluid">
            <div class="org-name">FOOTPRINTS DISABLED IMPACT</div>
            <div class="org-address">P. O. Box KN 3083, Kaneshie - Accra</div>
        </div>

        <h2 class="text-center mb-4 text-primary fw-bold">MEMBERSHIP REGISTRATION FORM</h2>

        <!-- MEMBER ID — CLEAN TEXT ONLY, NO BACKGROUND -->
        <div class="text-center mb-5">
            <h3 class="text-primary fw-bold" style="font-size: 2rem; letter-spacing: 2px;">
                FDI-{{ "%03d"|format(next_id) }}
            </h3>
        </div>

        <!-- PHOTO PREVIEW -->
        <div class="text-center mb-4">
            <div class="photo-preview" id="photoPreview">
                <span class="text-muted">Passport Photo will appear here</span>
            </div>
        </div>

        <form method="POST" enctype="multipart/form-data" id="registerForm">
            <div class="row g-4">
                <!-- All your fields — unchanged -->
                <div class="col-12">
                    <label class="form-label">Name in full:</label>
                    <input type="text" name="name" class="form-control form-control-lg" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Date of Birth:</label>
                    <input type="date" name="date_of_birth" class="form-control" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Gender:</label>
                    <select name="gender" class="form-select" required>
                        <option>Male</option>
                        <option>Female</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Nationality:</label>
                    <input type="text" name="nationality" class="form-control" value="Ghanaian" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Hometown:</label>
                    <input type="text" name="hometown" class="form-control" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Area within Ga West:</label>
                    <input type="text" name="area_ga_west" class="form-control" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">GPS Digital Address:</label>
                    <input type="text" name="gps_address" class="form-control" placeholder="e.g. GA-123-4567" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Ghana Card Number:</label>
                    <input type="text" name="ghana_card_number" class="form-control" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Upload Ghana Card Photo:</label>
                    <input type="file" name="ghana_card_photo" class="form-control" accept="image/*">
                </div>

                <div class="col-md-6">
                    <label class="form-label">When was the disability first identified?:</label>
                    <input type="text" name="disability_identified" class="form-control">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Cause of Disability (If Known):</label>
                    <input type="text" name="disability_cause" class="form-control">
                </div>

                <div class="col-md-6">
                    <label class="form-label">Full Name of Emergency Contact:</label>
                    <input type="text" name="emergency_name" class="form-control" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Relationship to Applicant:</label>
                    <input type="text" name="emergency_relationship" class="form-control" required>
                </div>
                <div class="col-12">
                    <label class="form-label">Phone Number of Emergency Contact:</label>
                    <input type="text" name="emergency_phone" class="form-control" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Are you currently registered with any Disability Organization?</label>
                    <select name="registered_organization" class="form-select">
                        <option>No</option>
                        <option>Yes</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">If Yes, state the organization:</label>
                    <input type="text" name="organization_name" class="form-control">
                </div>

                <div class="col-12">
                    <label class="form-label">Any additional notes or support needs:</label>
                    <textarea name="additional_notes" class="form-control" rows="4"></textarea>
                </div>

                <!-- Original fields -->
                <div class="col-md-6">
                    <label class="form-label">Marital Status:</label>
                    <select name="marital_status" class="form-select form-control-lg">
                        <option>Single</option>
                        <option>Married</option>
                        <option>Divorced</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Educational Level:</label>
                    <input type="text" name="educational_level" class="form-control">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Languages Spoken:</label>
                    <input type="text" name="languages_spoken" class="form-control" placeholder="e.g. Kasem, Sisaala, Twi">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Profession:</label>
                    <input type="text" name="profession" class="form-control">
                </div>
                <div class="col-md-6">
                    <label class="form-label">English Speaking Proficiency Level:</label>
                    <select name="english_proficiency" class="form-select">
                        <option>None</option>
                        <option>A Bit</option>
                        <option>Good</option>
                        <option>Fluent</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Phone Number:</label>
                    <input type="text" name="phone_number" class="form-control">
                </div>
                <div class="col-md-6">
                    <label class="form-label">E-mail:</label>
                    <input type="email" name="email" class="form-control">
                </div>
                <div class="col-12">
                    <label class="form-label">Residential Address:</label>
                    <input type="text" name="residential_address" class="form-control" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Disability Type:</label>
                    <select name="disability_type" class="form-select" required>
                        <option>Lame</option>
                        <option>Visually Impaired</option>
                        <option>Deaf & Dumb</option>
                        <option>Other</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Other - specify:</label>
                    <input type="text" name="disability_other" class="form-control">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Degree of Disability in Percentage:</label>
                    <input type="text" name="degree_of_disability" class="form-control">
                </div>
                <div class="col-md-6">
                    <label class="form-label">What are your disability needs?:</label>
                    <input type="text" name="disability_needs" class="form-control" placeholder="e.g. Crutches">
                </div>
                <div class="col-md-6">
                    <label class="form-label">What are your social needs?:</label>
                    <input type="text" name="social_needs" class="form-control" placeholder="e.g. Capital">
                </div>
                <div class="col-md-6">
                    <label class="form-label">Living Conditions:</label>
                    <select name="living_conditions" class="form-select">
                        <option>Live alone</option>
                        <option>With Family</option>
                        <option>With Friends</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Guarantor's Name:</label>
                    <input type="text" name="guarantor_name" class="form-control" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">Guarantor's Phone Number:</label>
                    <input type="text" name="guarantor_phone" class="form-control" required>
                </div>

                <!-- Photos -->
                <div class="col-12 text-center">
                    <label class="form-label d-block">Upload Passport Photo:</label>
                    <input type="file" name="photo" class="form-control form-control-lg" accept="image/*" onchange="previewPhoto(event)" required>
                </div>

                <div class="col-12 text-center mt-4">
                    <label class="form-label d-block fw-bold text-primary">Upload Full Body Photo:</label>
                    <input type="file" name="full_photo" class="form-control form-control-lg" accept="image/*">
                </div>
            </div>

            <!-- STANDARD SAVE BUTTON -->
            <div class="text-center mt-5">
                <button type="submit" class="btn btn-save text-white fw-bold" id="saveBtn">
                    SAVE RECORD
                </button>
            </div>
        </form>
    </div>
</div>

<script>
function previewPhoto(event) {
    const preview = document.getElementById('photoPreview');
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            preview.innerHTML = `<img src="${e.target.result}" alt="Photo Preview">`;
        }
        reader.readAsDataURL(file);
    }
}

// STABLE SAVE BUTTON — NO DOUBLE CLICK
document.getElementById('registerForm').addEventListener('submit', function(e) {
    const btn = document.getElementById('saveBtn');
    if (btn.disabled) {
        e.preventDefault();
        return;
    }
    btn.disabled = true;
    btn.innerHTML = 'Saving...';
});
</script>

</body>
</html>